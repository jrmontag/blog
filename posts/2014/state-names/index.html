<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="lab notebook, thoughts and notes">

        <link rel="alternate"  href="http://joshmontague.com/feeds/all.atom.xml" type="application/atom+xml" title="lab notebook Full Atom Feed"/>

        <title>Creating a Text File of U.S. State Names // lab notebook // thoughts and notes</title>


    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/pure/0.3.0/pure-min.css">
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/font-awesome/4.1.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="http://joshmontague.com/theme/css/pure.css">
    <link rel="stylesheet" href="http://joshmontague.com/theme/css/pygments.css">

    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/fitvids/1.0.1/jquery.fitvids.min.js"></script>
    <script>
        $(document).ready(function(){
            $(".content").fitVids();
        });
    </script>
</head>

<body>
    <div class="pure-g-r" id="layout">
        <div class="sidebar pure-u">
            <div class="cover-img" style="background-image: url('https://db.tt/EZ8f7qwr')">
                <div class="cover-body">
                    <header class="header">
                        <hgroup>
                            <h1 class="brand-main"><a href="http://joshmontague.com">lab notebook</a></h1>
                            <p class="tagline">thoughts and notes</p>
                                <p class="links"><a href="http://joshmontague.com/pages/about">About</a></p>
                                <p class="links"><a href="http://joshmontague.com/pages/talks">Talks</a></p>
                                <p class="social">
                                    <a href="https://github.com/jrmontag">
                                        <i class="fa fa-github fa-3x"></i>
                                    </a>
                                    <a href="https://twitter.com/jrmontag">
                                        <i class="fa fa-twitter-square fa-3x"></i>
                                    </a>
                                    <a href="https://linkedin.com/in/joshuamontague">
                                        <i class="fa fa-linkedin fa-3x"></i>
                                    </a>
                                </p>
                        </hgroup>
                    </header>
                </div>
            </div>
        </div>
    <div class="pure-u">
        <div class="content">
            <section class="post">
                <header class="post-header">
                    <h1>Creating a Text File of U.S. State Names</h1>
                        <p class="post-meta">
                            // under                                 <a class="post-category" href="http://joshmontague.com/tag/bash.html">bash</a>
                                <a class="post-category" href="http://joshmontague.com/tag/shell.html">shell</a>
                                <a class="post-category" href="http://joshmontague.com/tag/tools.html">tools</a>
                        </p>
                </header>
            </section>
            <p>While working on a project recently, I needed a simple list of US State names. My goal was to have a plain text file, one state per line, no funny business. The order of the states wasn't important. I always like a command-line challenge, so my first thought was "find the list online somewhere, <code>wget</code> or <code>curl</code> as needed, slice up the html, and be done."<sup id="fnref:woops"><a class="footnote-ref" href="#fn:woops" rel="footnote">1</a></sup></p>
<p>So, I went to <a href="http://en.wikipedia.org/wiki/Main_Page">the source of all information</a>, and lo! there is a <a href="http://en.wikipedia.org/wiki/List_of_states_and_territories_of_the_United_States#States">table</a> whose first column is all the US states. <em>#fistpump</em> The only problem is I really wasn't planning to parse HTML for this little exercise; seems like a bit of overkill. But then I noted the <code>[edit]</code> link next to the table name...</p>
<p><img alt="Wikipedia table edit button" src="http://joshmontague.com/images/state-table.jpg" title="Yes, this will definitely work." /></p>
<p>... and clicked through that to observe just the table source. Now this we can work with! </p>
<p>I simply copy/pasted this plain text into a file locally (say, <code>states-table.txt</code>). Then, had a look:</p>
<div class="highlight"><pre><span></span>$ head -n30 states-table.txt 
<span class="o">==</span><span class="nv">States</span><span class="o">==</span>
<span class="o">{</span><span class="p">|</span> <span class="nv">class</span><span class="o">=</span><span class="s2">&quot;wikitable sortable plainrowheaders&quot;</span> <span class="nv">style</span><span class="o">=</span><span class="s2">&quot;text-align: right;&quot;</span>
<span class="p">|</span>+ States of the United States
!scope<span class="o">=</span><span class="s2">&quot;col&quot;</span> <span class="nv">width</span><span class="o">=</span>12%<span class="p">|</span>State
!scope<span class="o">=</span><span class="s2">&quot;col&quot;</span> <span class="nv">width</span><span class="o">=</span>1%<span class="p">|</span><span class="o">[[</span>List of U.S. state abbreviations<span class="p">|</span>Abbr.<span class="o">]]</span>
!scope<span class="o">=</span><span class="s2">&quot;col&quot;</span> <span class="nv">width</span><span class="o">=</span>8%<span class="p">|</span><span class="o">[[</span>Capital city<span class="p">|</span>Capital<span class="o">]]</span>
!scope<span class="o">=</span><span class="s2">&quot;col&quot;</span> <span class="nv">width</span><span class="o">=</span>12%<span class="p">|</span>Largest city<span class="o">{{</span><span class="c1">#tag:ref|The largest city is the city in a state with the largest population in the [[city proper]]; [[metropolitan area]]s are not considered in this number.|group=upper-alpha|name=a}}&lt;ref name=&quot;State and Local Government Finances and Employment&quot;&gt;{{cite web|url=http://www.census.gov/compendia/statab/2012/tables/12s0448.pdf|title=State and Local Government Finances and Employment|year=2012|publisher=[[United States Census Bureau]]|pages=284|type=pdf|accessdate=July 8, 2013}}&lt;/ref&gt;</span>
!scope<span class="o">=</span><span class="s2">&quot;col&quot;</span> <span class="nv">width</span><span class="o">=</span>11% data-sort-type<span class="o">=</span><span class="s2">&quot;date&quot;</span><span class="p">|</span>Statehood
!scope<span class="o">=</span><span class="s2">&quot;col&quot;</span> <span class="nv">width</span><span class="o">=</span><span class="s2">&quot;12%&quot;</span><span class="p">|</span>Population&lt;br&gt;<span class="o">(</span><span class="m">2013</span> est<span class="o">)</span>&lt;ref <span class="nv">name</span><span class="o">=</span>PopEstUS&gt;<span class="o">{{</span>cite web<span class="p">|</span><span class="nv">url</span><span class="o">=</span>http://www.census.gov/popest/data/state/totals/2013/tables/NST-EST2013-01.xls<span class="p">|</span><span class="nv">title</span><span class="o">=</span>Table 1. Annual Estimates of the Population <span class="k">for</span> the United States, Regions, States, and Puerto Rico: April 1, <span class="m">2010</span> to July 1, 2013<span class="p">|</span><span class="nv">format</span><span class="o">=[[</span>Microsoft Excel<span class="o">]]</span><span class="p">|</span><span class="nv">work</span><span class="o">=</span><span class="m">2013</span> Population Estimates<span class="p">|</span><span class="nv">publisher</span><span class="o">=[[</span>United States Census Bureau<span class="o">]]</span>, Population Division<span class="p">|</span><span class="nv">date</span><span class="o">=</span>December 2013<span class="p">|</span><span class="nv">accessdate</span><span class="o">=</span>January 12, 2014<span class="o">}}</span>&lt;/ref&gt;
!scope<span class="o">=</span><span class="s2">&quot;col&quot;</span> <span class="nv">width</span><span class="o">=</span>12%<span class="p">|</span>Total area in mi&lt;sup&gt;2&lt;/sup&gt; <span class="o">(</span>km&lt;sup&gt;2&lt;/sup&gt;<span class="o">){{</span><span class="c1">#tag:ref|Area figures are rounded to the nearest whole number.|group=upper-alpha|name=b}}&lt;ref name=&quot;2010 Census of Population and Housing&quot;&gt;{{cite web|url=http://www.census.gov/prod/cen2010/cph-2-1.pdf|title=2010 Census of Population and Housing|date=September 2012|publisher=[[United States Census Bureau]]|pages=41|type=pdf|accessdate=July 8, 2013}}&lt;/ref&gt;</span>
!scope<span class="o">=</span><span class="s2">&quot;col&quot;</span> <span class="nv">width</span><span class="o">=</span>12%<span class="p">|</span>Land area in mi&lt;sup&gt;2&lt;/sup&gt; <span class="o">(</span>km&lt;sup&gt;2&lt;/sup&gt;<span class="o">)</span>&lt;ref <span class="nv">group</span><span class="o">=</span>upper-alpha <span class="nv">name</span><span class="o">=</span>b /&gt;&lt;ref <span class="nv">name</span><span class="o">=</span><span class="s2">&quot;2010 Census of Population and Housing&quot;</span> /&gt;
!scope<span class="o">=</span><span class="s2">&quot;col&quot;</span> <span class="nv">width</span><span class="o">=</span>12%<span class="p">|</span>Water area in mi&lt;sup&gt;2&lt;/sup&gt; <span class="o">(</span>km&lt;sup&gt;2&lt;/sup&gt;<span class="o">)</span>&lt;ref <span class="nv">group</span><span class="o">=</span>upper-alpha <span class="nv">name</span><span class="o">=</span>b /&gt;&lt;ref <span class="nv">name</span><span class="o">=</span><span class="s2">&quot;2010 Census of Population and Housing&quot;</span> /&gt;
!scope<span class="o">=</span><span class="s2">&quot;col&quot;</span> <span class="nv">width</span><span class="o">=</span>1%<span class="p">|</span><span class="o">[[</span>List of United States congressional districts<span class="p">|</span>House seat<span class="o">(</span>s<span class="o">)]]</span>
<span class="p">|</span>-
!scope<span class="o">=</span><span class="s2">&quot;row&quot;</span><span class="p">|</span><span class="o">{{</span>flag<span class="p">|</span>Alabama<span class="o">}}</span>
<span class="p">|</span>AL
<span class="p">|</span><span class="o">[[</span>Montgomery, Alabama<span class="p">|</span>Montgomery<span class="o">]]</span>
<span class="p">|</span><span class="o">[[</span>Birmingham, Alabama<span class="p">|</span>Birmingham<span class="o">]]</span>
<span class="p">|</span>December 14, 1819
<span class="p">|</span>4,833,722
<span class="p">|</span><span class="o">{{</span>Convert<span class="p">|</span>52420<span class="p">|</span>mi2<span class="p">|</span>km2<span class="p">|</span><span class="nv">sigfig</span><span class="o">=</span>6<span class="p">|</span><span class="nv">abbr</span><span class="o">=</span>values<span class="p">|</span><span class="nv">sortable</span><span class="o">=</span>on<span class="o">}}</span>
<span class="p">|</span><span class="o">{{</span>Convert<span class="p">|</span>50645<span class="p">|</span>mi2<span class="p">|</span>km2<span class="p">|</span><span class="nv">sigfig</span><span class="o">=</span>6<span class="p">|</span><span class="nv">abbr</span><span class="o">=</span>values<span class="p">|</span><span class="nv">sortable</span><span class="o">=</span>on<span class="o">}}</span>
<span class="p">|</span><span class="o">{{</span>Convert<span class="p">|</span>1775<span class="p">|</span>mi2<span class="p">|</span>km2<span class="p">|</span><span class="nv">sigfig</span><span class="o">=</span>4<span class="p">|</span><span class="nv">abbr</span><span class="o">=</span>values<span class="p">|</span><span class="nv">sortable</span><span class="o">=</span>on<span class="o">}}</span>
<span class="p">|</span>7
<span class="p">|</span>-
!scope<span class="o">=</span><span class="s2">&quot;row&quot;</span><span class="p">|</span><span class="o">{{</span>flag<span class="p">|</span>Alaska<span class="o">}}</span>
<span class="p">|</span>AK
<span class="p">|</span><span class="o">[[</span>Juneau, Alaska<span class="p">|</span>Juneau<span class="o">]]</span>
<span class="p">|</span><span class="o">[[</span>Anchorage, Alaska<span class="p">|</span>Anchorage<span class="o">]]</span>
<span class="p">|</span>January 3, 1959
</pre></div>


<p>Clearly there's a lot of extra formatting for the other columns, but we can see a couple of the state names, so we can definitely observe some patterns. A simple <code>grep</code> and <code>sed</code> combination get us almost to the finish line:</p>
<div class="highlight"><pre><span></span>$ cat states-table.txt <span class="p">|</span> grep <span class="s2">&quot;flag|&quot;</span> <span class="p">|</span> sed <span class="s1">&#39;s/^.*flag|//;s/}}.*//&#39;</span>
Alabama
Alaska
Arizona
Arkansas
California
Colorado
Connecticut
Delaware
Florida
Georgia <span class="o">(</span>U.S. state<span class="o">)</span><span class="p">|</span><span class="nv">name</span><span class="o">=</span>Georgia
Hawaii
...
</pre></div>


<p>One extra bit of <code>sed</code> formatting (strip anything that's not a letter)... </p>
<div class="highlight"><pre><span></span>$ cat states-table.txt <span class="p">|</span> grep <span class="s2">&quot;flag|&quot;</span> <span class="p">|</span> sed <span class="s1">&#39;s/^.*flag|//;s/}}.*//;s/ [^a-Z].*$//&#39;</span>
Alabama
Alaska
Arizona
Arkansas
California
Colorado
Connecticut
Delaware
Florida
Georgia
Hawaii
...
</pre></div>


<p>... and we're good to go! (note: if you're doing this on OS X, you may have to swap that last <code>sed</code> range for <code>[^a-zA-Z]</code>) </p>
<p>It's always nice to flex your command-line fu.</p>
<div class="footnote">
<hr />
<ol>
<li id="fn:woops">
<p>In hindsight, I clearly could have spent an extra 30 seconds on google and just copypasta'd the results from a site like <a href="http://liststates.com/">this one</a>. But where's the fun in that?? &#160;<a class="footnote-backref" href="#fnref:woops" rev="footnote" title="Jump back to footnote 1 in the text">&#8617;</a></p>
</li>
</ol>
</div>
            <a href="#" class="go-top">Go Top</a>
    <div class="comments">
        <div id="disqus_thread"></div>
        <script type="text/javascript">
            /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
            var disqus_shortname = "joshmontaguecom"; // required: replace example with your forum shortname

            /* * * DON'T EDIT BELOW THIS LINE * * */
            (function() {
                var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
                dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
                (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
            })();
        </script>
        <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
        <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
    </div>
<footer class="footer">
    <p>&copy; Josh Montague &ndash;
        Built with <a href="https://github.com/PurePelicanTheme/pure-single">Pure Theme</a>
        for <a href="http://blog.getpelican.com/">Pelican</a>
    </p>
</footer>        </div>
    </div>
    </div>
    <script>
        var $top = $('.go-top');

        // Show or hide the sticky footer button
        $(window).scroll(function() {
            if ($(this).scrollTop() > 200) {
                $top.fadeIn(200);
            } else {
                $top.fadeOut(200);
            }
        });

        // Animate the scroll to top
        $top.click(function(event) {
            event.preventDefault();
            $('html, body').animate({scrollTop: 0}, 300);
        })

        // Makes sure that the href="#" attached to the <a> elements
        // don't scroll you back up the page.
        $('body').on('click', 'a[href="#"]', function(event) {
            event.preventDefault();
        });
    </script>
    <script type="text/javascript">
        var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
        document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
    </script>
    <script type="text/javascript">
        try {
            var pageTracker = _gat._getTracker("UA-46808845-1");
            pageTracker._trackPageview();
            } catch(err) {}
    </script>

</body>
</html>